<h1>INDEX</h1>


<p>
  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut pharetra interdum sollicitudin. Duis ornare erat ac nulla tempor, id semper elit laoreet. Sed velit elit, fermentum vel porta ac, egestas non urna. Ut enim lorem, vehicula ac tristique eget, hendrerit maximus nibh. Nunc at sollicitudin magna. Fusce sit amet dignissim lacus. Ut scelerisque neque quis vehicula volutpat. Quisque non justo varius nunc scelerisque lacinia. Duis in ullamcorper mauris, eget sollicitudin libero. Maecenas in justo blandit velit auctor consequat. Phasellus auctor rutrum scelerisque. In lobortis nec tortor eu efficitur. Integer lacus purus, accumsan eu arcu sit amet, tempor sagittis nunc. Vestibulum et quam in turpis pellentesque dapibus. Nam quis nibh feugiat, suscipit sem in, scelerisque quam.
</p>

<p>
  HOW THIS WORKS:
  blah blah blah
</p>

<!-- insert map of us states -->


<h2>Let's start vote-trading!</h2>
<form action="/voters" method="POST" id="main-form">
  <input name="authenticity_token" value="<%= form_authenticity_token() %>" type="hidden">
  <div id="form-part1">
    <label>I don't want Trump to win, but I want to vote for </label>
    <br/>
    <input type="radio" name="desired_candidate" value="johnson"> Gary Johnson <br/>
    <input type="radio" name="desired_candidate" value="stein"> Jill Stein <br/>
    <input type="radio" name="desired_candidate" value="hillary"> Hillary Clinton <br/>
  </div>
  

  <div id="form-part2">
    <p class="message"></p>

    <label> I live in:
      <select name="user_state">
        <option value="">Select State</option>
        <option value="AL">AL</option>
        <option value="AK">AK</option>
        <option value="AR">AR</option>
        <option value="AZ">AZ</option>
        <option value="CA">CA</option>
        <option value="CO">CO</option>
        <option value="CT">CT</option>
        <option value="DC">DC</option>
        <option value="DE">DE</option>
        <option value="FL">FL</option>
        <option value="GA">GL</option>
        <option value="HA">HA</option>
        <option value="IA">IA</option>
        <option value="ID">ID</option>
        <option value="IL">IL</option>
        <option value="IN">IN</option>
        <option value="KS">KS</option>
        <option value="KY">KY</option>
        <option value="LA">LA</option>
        <option value="MA">MA</option>
        <option value="MD">MD</option>
        <option value="ME">ME</option>
        <option value="MI">MI</option>
        <option value="MN">MN</option>
        <option value="MO">MO</option>
        <option value="MS">MS</option>
        <option value="MT">MT</option>
        <option value="NC">NC</option>
        <option value="ND">ND</option>
        <option value="NE">NE</option>
        <option value="NH">NH</option>
        <option value="NJ">NJ</option>
        <option value="NM">NM</option>
        <option value="NV">NV</option>
        <option value="NY">NY</option>
        <option value="OH">OH</option>
        <option value="OK">OK</option>
        <option value="OR">OR</option>
        <option value="PA">PA</option>
        <option value="RI">RI</option>
        <option value="SC">SC</option>
        <option value="SD">SD</option>
        <option value="TN">TN</option>
        <option value="TX">TX</option>
        <option value="UT">UT</option>
        <option value="VA">VA</option>
        <option value="VT">VT</option>
        <option value="WA">WA</option>
        <option value="WI">WI</option>
        <option value="WV">WV</option>
        <option value="WY">WY</option>
      </select>
    </label>
  </div>

  <h3 id="message-to-user"></h3>

  <div id="form-part3">
    <label>My email is:
      <input type="text" name="email" placeholder="email" required>
    </label>
  </div>

  <button id="btn-submit">Submit</button>
</form>




<script>
  const US_STATES = [
    { name: 'ALABAMA', abbreviation: 'AL'},
    { name: 'ALASKA', abbreviation: 'AK'},
    { name: 'ARIZONA', abbreviation: 'AZ'},
    { name: 'ARKANSAS', abbreviation: 'AR'},
    { name: 'CALIFORNIA', abbreviation: 'CA'},
    { name: 'COLORADO', abbreviation: 'CO'},
    { name: 'CONNECTICUT', abbreviation: 'CT'},
    { name: 'DELAWARE', abbreviation: 'DE'},
    { name: 'DISTRICT OF COLUMBIA', abbreviation: 'DC'},
    { name: 'FLORIDA', abbreviation: 'FL'},
    { name: 'GEORGIA', abbreviation: 'GA'},
    { name: 'HAWAII', abbreviation: 'HI'},
    { name: 'IDAHO', abbreviation: 'ID'},
    { name: 'ILLINOIS', abbreviation: 'IL'},
    { name: 'INDIANA', abbreviation: 'IN'},
    { name: 'IOWA', abbreviation: 'IA'},
    { name: 'KANSAS', abbreviation: 'KS'},
    { name: 'KENTUCKY', abbreviation: 'KY'},
    { name: 'LOUISIANA', abbreviation: 'LA'},
    { name: 'MAINE', abbreviation: 'ME'},
    { name: 'MARYLAND', abbreviation: 'MD'},
    { name: 'MASSACHUSETTS', abbreviation: 'MA'},
    { name: 'MICHIGAN', abbreviation: 'MI'},
    { name: 'MINNESOTA', abbreviation: 'MN'},
    { name: 'MISSISSIPPI', abbreviation: 'MS'},
    { name: 'MISSOURI', abbreviation: 'MO'},
    { name: 'MONTANA', abbreviation: 'MT'},
    { name: 'NEBRASKA', abbreviation: 'NE'},
    { name: 'NEVADA', abbreviation: 'NV'},
    { name: 'NEW HAMPSHIRE', abbreviation: 'NH'},
    { name: 'NEW JERSEY', abbreviation: 'NJ'},
    { name: 'NEW MEXICO', abbreviation: 'NM'},
    { name: 'NEW YORK', abbreviation: 'NY'},
    { name: 'NORTH CAROLINA', abbreviation: 'NC'},
    { name: 'NORTH DAKOTA', abbreviation: 'ND'},
    { name: 'OHIO', abbreviation: 'OH'},
    { name: 'OKLAHOMA', abbreviation: 'OK'},
    { name: 'OREGON', abbreviation: 'OR'},
    { name: 'PENNSYLVANIA', abbreviation: 'PA'},
    { name: 'RHODE ISLAND', abbreviation: 'RI'},
    { name: 'SOUTH CAROLINA', abbreviation: 'SC'},
    { name: 'SOUTH DAKOTA', abbreviation: 'SD'},
    { name: 'TENNESSEE', abbreviation: 'TN'},
    { name: 'TEXAS', abbreviation: 'TX'},
    { name: 'UTAH', abbreviation: 'UT'},
    { name: 'VERMONT', abbreviation: 'VT'},
    { name: 'VIRGINIA', abbreviation: 'VA'},
    { name: 'WASHINGTON', abbreviation: 'WA'},
    { name: 'WEST VIRGINIA', abbreviation: 'WV'},
    { name: 'WISCONSIN', abbreviation: 'WI'},
    { name: 'WYOMING', abbreviation: 'WY' }
      // "AL",
      // "AK",
      // "AR",
      // "AZ",
      // "CA",
      // "CO",
      // "CT",
      // "DC",
      // "DE",
      // "FL",
      // "GL",
      // "HA",
      // "IA",
      // "ID",
      // "IL",
      // "IN",
      // "KS",
      // "KY",
      // "LA",
      // "MA",
      // "MD",
      // "ME",
      // "MI",
      // "MN",
      // "MO",
      // "MS",
      // "MT",
      // "NC",
      // "ND",
      // "NE",
      // "NH",
      // "NJ",
      // "NM",
      // "NV",
      // "NY",
      // "OH",
      // "OK",
      // "OR",
      // "PA",
      // "RI",
      // "SC",
      // "SD",
      // "TN",
      // "TX",
      // "UT",
      // "VA",
      // "VT",
      // "WA",
      // "WI",
      // "WV",
      // "WY"
  ];
  const SWING_STATES = [
    // "Arizona",
    // "Colorado",
    // "Florida",
    // "Georgia",
    // "Iowa",
    // "New Hampshire",
    // "New Mexico",
    // "Nevada",
    // "North Carolina",
    // "Ohio",
    // "Pennsylvania",
    // "Virginia",
    // "Wisconsin"
    "AZ",
    "CO",
    "FL",
    "GA",
    "IA",
    "NH",
    "NM",
    "NV",
    "NC",
    "OH",
    "PA",
    "VA",
    "WI"
  ];
  /* not sure if following is necessary */
  const BLUE_STATES = [
    // "California",
    // "Connecticut",
    // "Delaware",
    // "Washingtong DC",
    // "Hawaii",
    // "Maine",
    // "Maryland",
    // "Massachusetts",
    // "Michigan",
    // "Minnesota",
    // "New Jersey",
    // "New York",
    // "Oregon",
    // "Rhode Island",
    // "Vermont",
    // "Washington"
    "CA",
    "CT",
    "DC",
    "DE",
    "HA",
    "ME",
    "MD",
    "MA",
    "MI",
    "MN",
    "NJ",
    "NY",
    "OR",
    "RI",
    "VT",
    "WA"
  ];
  const RED_STATES = [
    // "Alabama",
    // "Alaska",
    // "Arkansas",
    // "Idaho",
    // "Illinois",
    // "Indiana",
    // "Kansas",
    // "Kentucky",
    // "Louisiana",
    // "Mississippi",
    // "Missouri",
    // "Montana",
    // "Nebraska",
    // "North Dakota",
    // "Oklahoma",
    // "South Carolina",
    // "South Dakota",
    // "Tennessee",
    // "Texas",
    // "Utah",
    // "West Virginia",
    // "Wyoming"
    "AL",
    "AK",
    "AR",
    "ID",
    "IL",
    "IN",
    "KS",
    "KY",
    "LA",
    "MS",
    "MO",
    "MT",
    "NE",
    "ND",
    "OK",
    "SC",
    "SD",
    "TN",
    "TX",
    "UT",
    "WV",
    "WY"
  ];

  $(document).ready(function(){
    let input3rdPartyCandidate = $('input[name="desired_candidate"]'),
        inputUserState = $('select[name="user_state"]'),
        usStatesAbbreviation = "",
        formPt2 = $('#form-part2'),
        formPt3 = $('#form-part3'),
        btnSubmit = $('#btn-submit');

    /* hide form parts */
    formPt2.hide();
    formPt3.hide();
    btnSubmit.hide();

    /* PART 2 */
    /* bind value change for 3rd party canddiates */
    input3rdPartyCandidate.change(function(){
      formPt2.hide();    
      let desiredCandidate = $('input[name="desired_candidate"]:checked').val();
      showFormPt2(desiredCandidate, formPt2);      
    });


    /* PART 3 */
    /* bind value change for user states */
    inputUserState.change(function(){
      formPt3.hide();
      btnSubmit.hide();

      setInputUserState(inputUserState);

      formPt3.show(); 
      btnSubmit.show();     
    });


    
    /* SUBMIT */
    /* bind submit: make sure all thigns are okay to send */

    btnSubmit.click(function(){
      checkSubmit();
      return false;
    });
  });

  function setInputUserState(inputUserState) {
    let userStateAbbrev = inputUserState.val(), // "CA"
        politicalLeaning = checkStateColor(userStateAbbrev),
        msgToUser;
    
    /* make message to user about their state's political leaning */
    msgToUser = informStateColor(userStateAbbrev, politicalLeaning);

    /* update message on screen */
    $('#message-to-user').html(msgToUser);
  }



  function showFormPt2(desiredCandidate, formPt2) {
    let msg = "";

    if (desiredCandidate === 'hillary') {
      msg = "Yeah! #ImWithHer too! Let's see if your state is a SWING state. ";
    } else {
      msg = "Good for you! 3rd parties are great, but we can't let Trump win. Let's see if you live in a SWING state where voting 3rd party might result in Trump winning. ";
    }
    msg += "Where do you live?"

    formPt2.find('.message').html(msg);
    
    formPt2.show();
  }


  function checkStateColor(userStateAbbrev) {
    let politicalLeaning = ""
    if ( SWING_STATES.indexOf( userStateAbbrev ) !== -1 ) {
      politicalLeaning = 'SWING';
    } else if ( BLUE_STATES.indexOf( userStateAbbrev ) !== -1 ) {
      politicalLeaning = 'BLUE';
    } else if ( RED_STATES.indexOf( userStateAbbrev ) !== -1 ) {
      politicalLeaning = 'RED';
    }
    return politicalLeaning;
  }
  function informStateColor(userStateAbbrev, politicalLeaning) {
    let msg = 'You live in ' + userStateAbbrev + ', a ' + politicalLeaning + ' state. \n',
        explanation = '';
    
    if (politicalLeaning === 'SWING') {
      explanation += "This means your vote is VITAL in keeping Trump out of the White house! Enter your email below and we'll pair you with someone in a NON-SWING state so you can trade votes and help stop Trump!";
    } else {
      explanation += "This means the outcome of your state won't change if you help someone vote 3rd party. Enter your email below and we'll pair you with someone in a SWING state so you can trade votes and help stop Trump!";
    }
    msg += explanation;

    return msg;
  }

  function showFormPt3() {

  }

  function checkSubmit() {
    if ( $('select["user_state"]').val() !== "" && $('input[name="email"]').val() !== "" ) {
      console.log('yay');
    } else {
      alert( 'Please fill out the entire form!');
    }
  }


</script>